---
description: 
globs: 
alwaysApply: false
---
Let's add a new chain.

First, start by adding the new chain in the UI, like the other chains.
For the network options/parameters use
- "celestia-mainnet-beta"
- "celestia-mocha-testnet"


Next, let's implement the stake and unstake flow in the backend.
For stake, use [createStake.ts](mdc:api/staking/createStake.ts)
For unstake, use [createUnstake.ts](mdc:api/staking/createUnstake.ts)
For sign & broadcast, we need to use a new signing module, but the broadcasting is using the same shared code for all chains, which is [broadcastTransaction.ts](mdc:api/staking/broadcastTransaction.ts)

To implement the signing, use this [signing-celestia.ts](mdc:lib/networks/signing-celestia.ts) to put the signing logic. The logic must be copied from this script [sign-and-broadcast.spec.ts](mdc:lib/signers-sdk-main/src/celestia/__tests__/sign-and-broadcast.spec.ts) but without the broadcasting part, because that is taken care of by the shared [broadcastTransaction.ts](mdc:api/staking/broadcastTransaction.ts)

For all constants, please store the necessary secrets inside the .env file in the root folder, and any chain specific information use [celestia.config.js](mdc:lib/networks/celestia.config.js) 